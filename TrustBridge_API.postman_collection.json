{
  "info": {
    "name": "TrustBridge API - Base Sepolia (Complete)",
    "description": "Complete API collection for TrustBridge backend on Base Sepolia. Includes authentication, exchange rates, transfers with blockchain swaps, transactions, PDF invoices, and balance checking. Ready for Tera-Chatbot integration.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "3.0.0"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "transfer_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "item": [
        {
          "name": "Root Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/",
              "host": ["{{base_url}}"],
              "path": [""]
            },
            "description": "Check if API is running and get basic info"
          }
        },
        {
          "name": "Health Endpoint",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            }
          }
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login or Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', jsonData.tokens.accessToken);",
                  "    pm.collectionVariables.set('refresh_token', jsonData.tokens.refreshToken);",
                  "    pm.collectionVariables.set('user_id', jsonData.user.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"whatsappNumber\": \"+6281234567890\",\n  \"countryCode\": \"ID\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Login with WhatsApp number or register new user"
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', jsonData.tokens.accessToken);",
                  "    pm.collectionVariables.set('refresh_token', jsonData.tokens.refreshToken);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/auth/refresh",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "refresh"]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/auth/me",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "me"]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/auth/logout",
              "host": ["{{base_url}}"],
              "path": ["api", "auth", "logout"]
            }
          }
        }
      ]
    },
    {
      "name": "Exchange Rates",
      "item": [
        {
          "name": "Get All Exchange Rates",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/exchange/rates?base=USD",
              "host": ["{{base_url}}"],
              "path": ["api", "exchange", "rates"],
              "query": [
                {
                  "key": "base",
                  "value": "USD",
                  "description": "Base currency (default: USD)"
                }
              ]
            },
            "description": "Get all exchange rates for supported currencies"
          }
        },
        {
          "name": "Get Specific Exchange Rate",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/exchange/rate?from=USD&to=IDR",
              "host": ["{{base_url}}"],
              "path": ["api", "exchange", "rate"],
              "query": [
                {
                  "key": "from",
                  "value": "USD"
                },
                {
                  "key": "to",
                  "value": "IDR"
                }
              ]
            },
            "description": "Get exchange rate between two specific currencies"
          }
        },
        {
          "name": "Get Supported Currencies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/exchange/currencies",
              "host": ["{{base_url}}"],
              "path": ["api", "exchange", "currencies"]
            },
            "description": "Get list of supported currencies with symbols"
          }
        },
        {
          "name": "Get Transfer Quote",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"senderCurrency\": \"USD\",\n  \"recipientCurrency\": \"IDR\",\n  \"amount\": 100\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/exchange/quote",
              "host": ["{{base_url}}"],
              "path": ["api", "exchange", "quote"]
            },
            "description": "Get complete transfer quote with fees and exchange rate"
          }
        },
        {
          "name": "Convert Amount",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"from\": \"USD\",\n  \"to\": \"IDR\",\n  \"amount\": 100\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/exchange/convert",
              "host": ["{{base_url}}"],
              "path": ["api", "exchange", "convert"]
            },
            "description": "Convert amount between currencies"
          }
        }
      ]
    },
    {
      "name": "Transfers",
      "item": [
        {
          "name": "Initiate Transfer",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('transfer_id', jsonData.data.transferId);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"whatsappNumber\": \"+6281234567890\",\n  \"paymentMethod\": \"WALLET\",\n  \"senderCurrency\": \"USD\",\n  \"senderAmount\": 100,\n  \"recipientName\": \"John Doe\",\n  \"recipientCurrency\": \"IDR\",\n  \"recipientBank\": \"BNI\",\n  \"recipientAccount\": \"1234567890\",\n  \"recipientWalletAddress\": \"0x...\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/transfer/initiate",
              "host": ["{{base_url}}"],
              "path": ["api", "transfer", "initiate"]
            },
            "description": "Initiate new transfer with blockchain swap execution"
          }
        },
        {
          "name": "Get Transfer Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transfer/status/{{transfer_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "transfer", "status", "{{transfer_id}}"]
            },
            "description": "Get transfer status with blockchain details"
          }
        },
        {
          "name": "Get Transfer History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transfer/history?limit=20&offset=0",
              "host": ["{{base_url}}"],
              "path": ["api", "transfer", "history"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            },
            "description": "Get user transfer history (paginated)"
          }
        },
        {
          "name": "Get Pending Transfers",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transfer/pending",
              "host": ["{{base_url}}"],
              "path": ["api", "transfer", "pending"]
            },
            "description": "Get all pending/processing transfers for user"
          }
        },
        {
          "name": "Download PDF Invoice",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transfer/invoice/{{transfer_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "transfer", "invoice", "{{transfer_id}}"]
            },
            "description": "Download PDF invoice for completed transfer"
          }
        },
        {
          "name": "Get Transfer Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transfer/{{transfer_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "transfer", "{{transfer_id}}"]
            },
            "description": "Get complete transfer details by ID"
          }
        }
      ]
    },
    {
      "name": "Transactions",
      "item": [
        {
          "name": "Get Transaction History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transactions?limit=20&offset=0",
              "host": ["{{base_url}}"],
              "path": ["api", "transactions"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            },
            "description": "Get combined transaction history (transfers + transactions)"
          }
        },
        {
          "name": "Get User Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transactions/stats",
              "host": ["{{base_url}}"],
              "path": ["api", "transactions", "stats"]
            },
            "description": "Get user transaction statistics (volume, fees, counts)"
          }
        },
        {
          "name": "Get Swap History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transactions/swaps?limit=20&offset=0",
              "host": ["{{base_url}}"],
              "path": ["api", "transactions", "swaps"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            },
            "description": "Get blockchain swap history for user"
          }
        },
        {
          "name": "Get Transaction by Hash",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transactions/hash/0x...",
              "host": ["{{base_url}}"],
              "path": ["api", "transactions", "hash", "0x..."]
            },
            "description": "Get transaction by blockchain hash"
          }
        },
        {
          "name": "Get Transaction by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transactions/txn-id",
              "host": ["{{base_url}}"],
              "path": ["api", "transactions", "txn-id"]
            },
            "description": "Get transaction by transaction ID"
          }
        }
      ]
    },
    {
      "name": "Blockchain",
      "item": [
        {
          "name": "Network Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/blockchain/info",
              "host": ["{{base_url}}"],
              "path": ["api", "blockchain", "info"]
            },
            "description": "Get Base Sepolia network info (block number, gas price)"
          }
        },
        {
          "name": "Backend Wallet Address",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/blockchain/backend-address",
              "host": ["{{base_url}}"],
              "path": ["api", "blockchain", "backend-address"]
            },
            "description": "Get backend wallet address and ETH balance"
          }
        },
        {
          "name": "Get All Token Addresses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/blockchain/tokens",
              "host": ["{{base_url}}"],
              "path": ["api", "blockchain", "tokens"]
            },
            "description": "Get all configured token and contract addresses"
          }
        },
        {
          "name": "Get Token Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/blockchain/tokens/0x886664e1707b8e013a4242ee0dbfe753c68bf7d4",
              "host": ["{{base_url}}"],
              "path": ["api", "blockchain", "tokens", "0x886664e1707b8e013a4242ee0dbfe753c68bf7d4"]
            },
            "description": "Get token info (name, symbol, decimals)"
          }
        },
        {
          "name": "Get Token Balance (Single)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/blockchain/balance/0x886664e1707b8e013a4242ee0dbfe753c68bf7d4?address=0x...",
              "host": ["{{base_url}}"],
              "path": ["api", "blockchain", "balance", "0x886664e1707b8e013a4242ee0dbfe753c68bf7d4"],
              "query": [
                {
                  "key": "address",
                  "value": "0x...",
                  "description": "Optional: wallet address"
                }
              ]
            },
            "description": "Get token balance for specific address"
          }
        },
        {
          "name": "Get All User Balances",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/blockchain/balance",
              "host": ["{{base_url}}"],
              "path": ["api", "blockchain", "balance"]
            },
            "description": "Get all token balances for authenticated user"
          }
        },
        {
          "name": "Estimate Swap (USDC to IDRX)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amountIn\": \"100000000\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/blockchain/estimate-swap",
              "host": ["{{base_url}}"],
              "path": ["api", "blockchain", "estimate-swap"]
            },
            "description": "Estimate USDC to IDRX swap via RemittanceSwap"
          }
        },
        {
          "name": "Estimate Multi-Token Swap",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tokenIn\": \"0x886664e1707b8e013a4242ee0dbfe753c68bf7d4\",\n  \"tokenOut\": \"0x67cacfe96ca874ec7a78ee0d6f7044e878ba9c4c\",\n  \"amountIn\": \"100000000\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/blockchain/estimate-multi-swap",
              "host": ["{{base_url}}"],
              "path": ["api", "blockchain", "estimate-multi-swap"]
            },
            "description": "Estimate any token pair swap via MultiTokenSwap"
          }
        },
        {
          "name": "Get Transaction",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/blockchain/tx/0x...",
              "host": ["{{base_url}}"],
              "path": ["api", "blockchain", "tx", "0x..."]
            },
            "description": "Get blockchain transaction details"
          }
        },
        {
          "name": "Get Transaction Receipt",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/blockchain/tx/0x.../receipt",
              "host": ["{{base_url}}"],
              "path": ["api", "blockchain", "tx", "0x...", "receipt"]
            },
            "description": "Get transaction receipt with logs"
          }
        },
        {
          "name": "Wait for Transaction",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/blockchain/tx/0x.../wait?confirmations=1",
              "host": ["{{base_url}}"],
              "path": ["api", "blockchain", "tx", "0x...", "wait"],
              "query": [
                {
                  "key": "confirmations",
                  "value": "1"
                }
              ]
            },
            "description": "Wait for transaction confirmation"
          }
        }
      ]
    }
  ]
}
